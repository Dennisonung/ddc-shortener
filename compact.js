const app = require('express')();const {writeFileSync, readFileSync} = require('fs');const bP = require('body-parser').json();const sha = require('js-sha512').sha512;app.use(bP);function CreateShortenURL(url) {let link = url.slice(0, 4) === 'http' ? url : 'https://' + url;let SavedURL = {url: link,};writeFileSync(`./ShortData/${sha(link).slice(0, 7)}.json`, JSON.stringify(SavedURL), (err) => { console.log(err) });return "http://localhost:8069/" + sha(link).slice(0, 7);};app.get('', (_req, res) => {res.sendFile(__dirname + "/compact.html");});app.post('/create', (req, res) => {res.send(CreateShortenURL(req.body.url))});app.get('/:sURL', (req, res) => {res.redirect(JSON.parse(readFileSync(`./ShortData/${req.params.sURL}.json`, 'utf8')).url)});app.listen(8069);